<?xml version="1.0"?>
<configuration platform="PCH_C620">
<!--
XML configuration file for

* Intel(R) C620 Series Chipset Family Platform Controller Hub
  https://www.intel.com/content/dam/www/public/us/en/documents/datasheets/c620-series-chipset-datasheet.pdf
-->

  <!-- #################################### -->
  <!--                                      -->
  <!-- Information                          -->
  <!--                                      -->
  <!-- #################################### -->
  <info>
    <sku did="0xA1C1" name="C621" code="PCH_C620" longname="Intel C621 (C620 series) PCH" />
    <sku did="0xA1C2" name="C622" code="PCH_C620" longname="Intel C622 (C620 series) PCH" />
    <sku did="0xA1C3" name="C624" code="PCH_C620" longname="Intel C624 (C620 series) PCH" />
    <sku did="0xA1C4" name="C625" code="PCH_C620" longname="Intel C625 (C620 series) PCH" />
    <sku did="0xA1C5" name="C626" code="PCH_C620" longname="Intel C626 (C620 series) PCH" />
    <sku did="0xA1C6" name="C627" code="PCH_C620" longname="Intel C627 (C620 series) PCH" />
    <sku did="0xA1C7" name="C628" code="PCH_C620" longname="Intel C628 (C620 series) PCH" />
    <sku did="0xA1CA" name="C629" code="PCH_C620" longname="Intel C629 (C620 series) PCH" />
    <sku did="0xA242" name="C624" code="PCH_C620" longname="Intel C624 (C620 series) PCH" />
    <sku did="0xA243" name="C627" code="PCH_C620" longname="Intel C627 (C620 series) PCH" />
    <sku did="0xA244" name="C621" code="PCH_C620" longname="Intel C621 (C620 series) PCH" />
    <sku did="0xA245" name="C627" code="PCH_C620" longname="Intel C627 (C620 series) PCH" />
    <sku did="0xA246" name="C628" code="PCH_C620" longname="Intel C628 (C620 series) PCH" />
  </info>

  <!-- #################################### -->
  <!--                                      -->
  <!-- Integrated devices                   -->
  <!--                                      -->
  <!-- #################################### -->
  <pci>
    <device name="SATA"  bus="0" dev="0x17" fun="0" vid="0x8086" did="0xA182,0xA186,0xA202,0xA206,0x2822,0x2826" />
    <device name="P2SBC" bus="0" dev="0x1F" fun="1" vid="0x8086" did="0xA220,0xA1A0" />
    <device name="PMC"   bus="0" dev="0x1F" fun="2" vid="0x8086" did="0xA221,0xA1A1" />
    <device name="SMBUS" bus="0" dev="0x1F" fun="4" vid="0x8086" did="0xA223,0xA1A3" />
    <device name="SPI"   bus="0" dev="0x1F" fun="5" vid="0x8086" did="0xA224,0xA1A4" />
  </pci>


  <!-- #################################### -->
  <!--                                      -->
  <!-- Memory Mapped I/O spaces (MMIO BARs) -->
  <!--                                      -->
  <!-- #################################### -->
  <mmio>
    <bar name="HDABAR"   bus="0" dev="0x1F" fun="3" reg="0x10" width="8" mask="0xFFFFFFFFFFFFC000" size="0x1000" desc="HD Audio Base"/>
  </mmio>

  <!-- #################################### -->
  <!--                                      -->
  <!-- I/O spaces (I/O BARs)                -->
  <!--                                      -->
  <!-- #################################### -->
  <io>
    <!-- old definition -->
    <bar name="SMBUS_BASE" bus="0" dev="0x1F" fun="4" reg="0x20" mask="0xFFE0"     size="0x80"  desc="SMBus Base Address"/>
  </io>

  <!-- #################################### -->
  <!--                                      -->
  <!-- Configuration registers              -->
  <!--                                      -->
  <!-- #################################### -->
  <registers>

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- PCIe Configuration registers -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <!-- Sideband Register Access Registers -->

    <!-- Power Management Controller -->
    <register name="ABASE"       type="pcicfg" device="PMC" offset="0x40" size="4" desc="ACPI Base Address">
      <field  name="Base" bit="8" size="24" desc="Base Address"/>
      <field name="STYPE" bit="0" size="1" desc="Space Type (always 1 - I/O space)"/>
    </register>
    <register name="ACTL"        type="pcicfg" device="PMC" offset="0x44" size="4" desc="ACPI Control">
      <field name="SCIS"    bit="0" size="3" desc="SCI IRQ Select"/>
      <field name="EN"      bit="7" size="1" desc="ACPI Enable"/>
      <field name="PWRM_EN" bit="8" size="1" desc="PWRM Enable"/>
    </register>
    <register name="PWRMBASE"    type="pcicfg" device="PMC" offset="0x48" size="4" desc="PM Base Address">
      <field name="STYPE" bit="0"  size="1"  desc="Space Type (always 0 - memory space)"/>
      <field name="BA"    bit="12" size="20" desc="Base Address"/>
    </register>
    <register name="GEN_PMCON_1" type="pcicfg" device="PMC" offset="0xA0" size="2" desc="General PM Configuration A">
      <field name="SMI_LOCK"    bit="4"     size="1"/>
    </register>
    <register name="GEN_PMCON_B" type="pcicfg" device="PMC" offset="0xA4" size="4" desc="General Power Management Configuration Lock">
      <field name="ACPI_BASE_LOCK" bit="17" size="1" desc="Lock down ACPI Base Address (ABASE)"/>
    </register>
    <register name="PM_CFG" type="mmio" bar="PWRMBASE" offset="0x18" size="4" desc="Power Management Configuration Reg 1"/>
    <register name="SMI_EN" type="iobar" bar="ABASE" offset="0x30" size="4" desc="SMI Control and Enable">
      <field name="GBL_SMI_EN"         bit="0"   size="1"/>
      <field name="EOS"                bit="1"   size="1"/>
      <field name="BIOS_EN"            bit="2"   size="1"/>
      <field name="LEGACY_USB_EN"      bit="3"   size="1"/>
      <field name="SLP_SMI_EN"         bit="4"   size="1"/>
      <field name="APMC_EN"            bit="5"   size="1"/>
      <field name="SWSMI_TMR_EN"       bit="6"   size="1"/>
      <field name="BIOS_RLS"           bit="7"   size="1"/>
      <field name="MCSMI_EN"           bit="11"  size="1"/>
      <field name="TCO_EN"             bit="13"  size="1"/>
      <field name="PERIODIC_EN"        bit="14"  size="1"/>
      <field name="IE_SMI_EN"          bit="23"  size="1"/>
      <field name="GPIO_UNLOCK_SMI_EN" bit="27"  size="1"/>
      <field name="ESPI_SMI_EN"        bit="28"  size="1"/>
      <field name="SERIAL_IO_SMI_EN"   bit="29"  size="1"/>
      <field name="ME_SMI_EN"          bit="30"  size="1"/>
      <field name="xHCI_SMI_EN"        bit="31"  size="1"/>
    </register>


    <!-- SMBus Host Controller -->
    <register name="TCOBASE"    type="pcicfg" device="SMBUS" offset="0x50" size="4" desc="TCO Base Address">
      <field name="IOS"   bit="0" size="1"  desc="I/O space"/>
      <field name="TCOBA" bit="5" size="11" desc="TCO Base Address"/>
    </register>
    <register name="TCOCTL"     type="pcicfg" device="SMBUS" offset="0x54" size="4" desc="TCO Control">
      <field name="TCO_BASE_LOCK" bit="0" size="1" desc="TCO Base Lock"/>
      <field name="TCO_BASE_EN"   bit="8" size="1" desc="TCO Base Enable"/>
    </register>

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- MMIO registers               -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <!-- PCH SPIBAR registers -->
    <register name="HSFS" type="mmio" bar="SPIBAR" offset="0x04" size="4" desc="Hardware Sequencing Flash Status Register">
      <field name="FDONE"   bit="0"  size="1" desc="Flash Cycle Done"/>
      <field name="FCERR"   bit="1"  size="1" desc="Flash Cycle Error"/>
      <field name="AEL"     bit="2"  size="1" desc="Access Error Log"/>
      <field name="SCIP"    bit="5"  size="1" desc="SPI cycle in progress"/>
      <field name="WRSDIS"  bit="11" size="1" desc="Write status disable"/>
      <field name="PR34LKD" bit="12" size="1" desc="PRR3 PRR4 Lock-Down"/>
      <field name="FDOPSS"  bit="13" size="1" desc="Flash Descriptor Override Pin-Strap Status"/>
      <field name="FDV"     bit="14" size="1" desc="Flash Descriptor Valid"/>
      <field name="FLOCKDN" bit="15" size="1" desc="Flash Configuration Lock-Down"/>
      <field name="FGO"     bit="16" size="1" desc="Flash cycle go"/>
      <field name="FCYCLE"  bit="17" size="4" desc="Flash Cycle Type"/>
      <field name="WET"     bit="21" size="1" desc="Write Enable Type"/>
      <field name="FDBC"    bit="24" size="6" desc="Flash Data Byte Count"/>
      <field name="FSMIE"   bit="31" size="1" desc="Flash SPI SMI# Enable"/>
    </register>
    <register name="HSFC" type="mmio" bar="SPIBAR" offset="0x06" size="2" desc="Hardware Sequencing Flash Control Register">
      <field name="FGO"    bit="0"  size="1" desc="Flash Cycle GO"/>
      <field name="FCYCLE" bit="1"  size="4" desc="Flash Cycle"/>
      <field name="WET"    bit="5"  size="1" desc="Write Enable Type"/>
      <field name="FDBC"   bit="8"  size="6" desc="Flash Data Byte Count, Count = FDBC + 1"/>
      <field name="FSMIE"  bit="15" size="1" desc="Flash SPI SMI Enable"/>
    </register>


    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- I/O registers (I/O ports)    -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <register name="ECTRL" type="mm_msgbus" port="0xB8" offset="0x0004" size="4" desc="DCI Control Register">
      <field name="ENABLE" bit="4" size="1"/>
    </register>

  </registers>

  <!-- #################################### -->
  <!--                                      -->
  <!-- 'Controls'                           -->
  <!--                                      -->
  <!-- #################################### -->
  <controls>
    <control name="ACPIBaseLock" register="GEN_PMCON_B" field="ACPI_BASE_LOCK" desc="Lock Down ACPI Base Address" />
    <control name="TcoCtlLock"      register="TCOCTL"  field="TCO_BASE_LOCK"  desc="TCO Base Lock"/>
  </controls>

</configuration>
