<?xml version="1.0"?>
<configuration platform="KBL" req_pch="True">
<!-- XML configuration file for Kaby Lake -->
<!--
CHIPSEC: Platform Security Assessment Framework
Copyright (c) 2018-2021, Intel Corporation

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; Version 2.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

Contact information:
chipsec@intel.com
-->

  <info family="core" detection_value="0x806e9">
     <sku did="0x5904" name="Kabylake" code="KBL" longname="Mobile 7th Generation Core Processor (Kabylake U)" />
  </info>

  <pci>
    <device name="HOSTCTL" bus="0x00" dev="0x00" fun="0" config="HOSTCTL.hostctl1.xml, IOMMU.iommu.xml"/>
    <device name="IGD"     bus="0x00" dev="0x02" fun="0" config="IGD.igd0.xml" />
  </pci>

  <mmiobar>
    <bar name="PXPEPBAR" device="HOSTCTL"  register="PXPEPBAR" base_field="PXPEPBAR" size="0x1000" enable_field="PXPEPBAREN" desc="PCI Express Egress Port Register Range"/>
    <bar name="MCHBAR"   device="HOSTCTL"  register="MCHBAR"   base_field="MCHBAR"   size="0x8000" enable_field="MCHBAREN"   desc="Host Memory Mapped Register Range"/>
    <bar name="MMCFG"    device="HOSTCTL"  register="PCIEXBAR" base_field="PXPEPBAR" size="0x1000" enable_field="PCIEXBAREN" desc="PCI Express Register Range"/>
    <bar name="DMIBAR"   device="HOSTCTL"  register="DMIBAR"   base_field="DMIBAR"   size="0x1000" enable_field="DMIBAREN"   desc="Root Complex Register Range"/>
    <bar name="VTBAR"    device="MCHBAR"   register="VTBAR"    base_field="Base"     size="0x1000" enable_field="Enable"     desc="Intel VT-d Register Register Range"/>
    <bar name="GFXVTBAR" device="MCHBAR"   register="GFXVTBAR" base_field="Base"     size="0x1000" enable_field="Enable"     desc="Intel Processor Graphics VT-d Register Range"/>
    <bar name="GTTMMADR" device="IGD"      register="GTTMMADR" base_field="MBA"      size="0x1000000" desc="Graphics Translation Table Range"/>
  </mmiobar>

  <msr>
    <definition name="MSR" config="MSR.msr2.xml" />
  </msr>

  <memory>
    <range name="TPM" access="mmio" address="0xFED40000" size="0x10000" config="TPM.tpm12.xml" />
    <range name="LT_PUBLIC_SPACE" access="mmio" address="0xFED30000" limit="0xFED3FFFF" config="TPM.txt.xml" />
  </memory>

</configuration>
